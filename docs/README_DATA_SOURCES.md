# 数据源完整指南

> 快速帮助您选择合适的数据源，优化系统配置

## 📚 文档导航

本套文档包含以下内容，按需查阅：

### 1. **快速参考** ← 👈 从这里开始
- **文件**：`DATA_SOURCE_QUICK_REFERENCE.txt`
- **内容**：1页纸快速对比、常见场景推荐、决策流程
- **适合**：想快速做出决定的用户
- **阅读时间**：5分钟

### 2. **选择指南**
- **文件**：`DATA_SOURCE_SELECTION_GUIDE.txt`
- **内容**：决策树、方案对比、一键配置命令
- **适合**：需要指导如何配置的用户
- **阅读时间**：10分钟

### 3. **详细对比**
- **文件**：`DATA_SOURCE_COMPARISON.md`
- **内容**：9个数据源的完整对比、使用建议、成本分析
- **适合**：需要深入了解的专业用户
- **阅读时间**：20分钟

---

## 🚀 快速决策（30秒版本）

### 最简单的答案

**我应该选哪个数据源？**

👉 **答案：Yahoo Finance**

为什么？
- ✅ 完全免费（¥0）
- ✅ 全球覆盖
- ✅ 无需配置（无API密钥）
- ✅ 数据完整（历史K线）
- ✅ 已在系统中完全优化

### 如果需要实时行情呢？

👉 **答案：Yahoo Finance + EastMoney**

配置：
1. Yahoo Finance：每天获取历史数据
2. EastMoney：每小时更新最新行情

成本：¥0（双双免费）

### 如果需要量化分析？

👉 **答案：Tushare（付费）+ Yahoo Finance**

成本：¥99-199/月（Tushare）

---

## 🎯 按用户类型推荐

| 用户类型 | 推荐方案 | 成本 | 理由 |
|---------|--------|------|------|
| 🎓 学生/学者 | Yahoo Finance | ¥0 | 免费、覆盖广、支持率高 |
| 👤 个人投资者 | Yahoo Finance | ¥0 | 简单易用、功能足够 |
| 👨‍👩‍👧‍👦 家庭投资 | Yahoo + EastMoney | ¥0 | 历史+实时、成本最低 |
| 👥 小型基金 | Yahoo + EastMoney | ¥0 | 可扩展、成本低 |
| 💼 中型机构 | Tushare + Yahoo | ¥1188+/月 | 功能全、支持量化 |
| 🏢 大型机构 | IEX Cloud + Yahoo | ¥7000+/月 | 专业级、实时 |
| 🤖 量化团队 | Tushare | ¥1188+/月 | 技术指标、回测支持 |

---

## 📊 数据源对比速查表

### 成本对比
```
免费（推荐）
├─ Yahoo Finance ✅
├─ EastMoney ✅
└─ Sina ⚠️（但数据质量差）

低成本
├─ FRED（¥0，但仅经济数据）
└─ Alpha Vantage（¥3000+/年）

中等成本
├─ Tushare（¥1188+/年）
└─ Tiingo（¥10000+/年）

高成本
├─ IEX Cloud（¥7000+/年）
└─ Polygon.io（¥14000+/年）
```

### 功能对比
```
最全面（4/4）
└─ Tushare（历史+实时+指标+企业数据）

很完整（3/4）
├─ EastMoney
└─ IEX Cloud

够用（2/4）
└─ Yahoo Finance（历史+企业数据）

有限（1/4）
└─ Sina（仅实时行情）
```

### 覆盖市场
```
全球覆盖
├─ Yahoo Finance ✅ 推荐
├─ Alpha Vantage
└─ Polygon.io

中国专业
├─ EastMoney
└─ Tushare

美国专业
├─ IEX Cloud
└─ Alpha Vantage

特殊用途
└─ FRED（美国经济指标）
```

---

## 💡 使用建议

### 原则1：优先用免费源
除非必要，不要为数据源付费。理由：
- Yahoo Finance 已经足够满足大多数需求
- 免费方案功能已经很完整
- 成本节省可用于其他地方

### 原则2：避免Sina陷阱
❌ **不要使用 Sina 作为主数据源**
- 原因：Sina 不支持历史K线数据
- 结果：同步数据会为0
- 系统处理：现在自动改用Yahoo Finance

✅ **改用 Yahoo Finance**
- 同样免费
- 数据更完整
- 系统已优化

### 原则3：组合使用优于单一源
✅ **推荐：Yahoo Finance + EastMoney**
- Yahoo：历史数据（基础）
- EastMoney：实时行情（补充）
- 互补优势，成本不增加

❌ **避免：多个高成本源**
- 成本爆炸
- 配置复杂
- 数据冗余

### 原则4：根据规模选择
```
资产 < 100 → Yahoo Finance 足够
资产 100-1000 → Yahoo + EastMoney
资产 > 1000 → 考虑付费方案（Tushare/IEX）
```

---

## 🔧 快速配置

### 最简配置（5分钟）
```
1. 转到系统 → "数据同步"
2. 创建任务
   - 名称：中国股票同步
   - 数据源：Yahoo Finance
   - 市场：SSE 或 SZSE
   - 频率：每天
3. 保存并运行
4. 查看日志验证
```

### 推荐配置（10分钟）
```
任务1：历史数据
  - 数据源：Yahoo Finance
  - 频率：每天1次

任务2：实时行情
  - 数据源：EastMoney
  - 频率：每小时1次
```

### 专业配置（30分钟）
```
前置条件：
  • 注册 Tushare（www.tushare.pro）
  • 获取 API Key
  
任务1：历史数据 → Yahoo Finance
任务2：详细数据 → Tushare
任务3：实时行情 → EastMoney
```

---

## ⚠️ 常见陷阱

### 陷阱1：选择Sina期望历史数据
❌ **错误**：Sina 不提供历史数据
✅ **解决**：改用 Yahoo Finance

### 陷阱2：为了高级功能付费
❌ **错误**：使用 Alpha Vantage（配额限制）
✅ **解决**：Yahoo Finance 更好且免费

### 陷阱3：同时配置多个高成本源
❌ **错误**：IEX + Alpha Vantage + Tushare
✅ **解决**：优先用免费方案

### 陷阱4：数据源选择不当导致同步失败
❌ **错误**：用 Sina 同步历史数据
✅ **解决**：参考本指南选择合适的源

---

## 📈 性能数据（参考）

### 响应时间
| 数据源 | 响应时间 | 注释 |
|--------|--------|------|
| Yahoo Finance | < 500ms | 快速 |
| EastMoney | 500-1000ms | 中等 |
| Tushare | 1000-2000ms | 较慢 |
| Sina | 100-200ms | 最快 |
| IEX Cloud | < 100ms | 极快 |

### 可靠性（正常运行时间）
| 数据源 | 可靠性 | SLA |
|--------|--------|------|
| Yahoo Finance | 99.9%+ | 无正式承诺 |
| EastMoney | 99.5%+ | 无正式承诺 |
| Tushare | 99%+ | 99% |
| FRED | 99.99%+ | 政府承诺 |
| IEX Cloud | 99.95%+ | 商业承诺 |

---

## 🔍 故障排除

### 问题：同步显示成功但数据为0
**原因**：使用了 Sina 数据源
**解决**：
1. 改用 Yahoo Finance
2. 重新运行同步
3. 验证 `total_records > 0`

📖 详见：`ZERO_RECORDS_SYNC_FIX.md`

### 问题：同步失败，显示 "Unsupported provider"
**原因**：使用了不支持的数据源
**解决**：
1. 检查数据源代码
2. 改用支持的源（Yahoo, EastMoney, Tushare）

📖 详见：`SYNC_FAILURE_FIX.md`

### 问题：API 配额用完
**原因**：使用了限制配额的数据源
**解决**：
1. 改用不限制的源（Yahoo Finance）
2. 或升级付费计划

---

## 📚 相关文档

| 文档 | 内容 | 阅读时间 |
|------|------|--------|
| DATA_SOURCE_QUICK_REFERENCE.txt | 1页快速参考 | 5分钟 |
| DATA_SOURCE_SELECTION_GUIDE.txt | 详细选择指南 | 10分钟 |
| DATA_SOURCE_COMPARISON.md | 完整对比分析 | 20分钟 |
| SYNC_FAILURE_FIX.md | 同步失败排查 | 15分钟 |
| ZERO_RECORDS_SYNC_FIX.md | 数据为0排查 | 15分钟 |

---

## 🎓 推荐阅读顺序

### 用户 A：急于开始
1. 本文件的"快速决策"部分（1分钟）
2. `DATA_SOURCE_QUICK_REFERENCE.txt`（5分钟）
3. 开始配置

### 用户 B：想要指导
1. 本文件（5分钟）
2. `DATA_SOURCE_SELECTION_GUIDE.txt`（10分钟）
3. 按指南配置

### 用户 C：需要深入了解
1. 本文件（5分钟）
2. `DATA_SOURCE_COMPARISON.md`（20分钟）
3. 做出最优决策
4. 配置并验证

---

## ✅ 检查清单

在选择数据源前，确认以下项目：

- [ ] 我知道自己需要什么数据（历史/实时/指标）
- [ ] 我知道覆盖哪些市场（中国/美国/全球）
- [ ] 我的预算是多少（¥0/付费）
- [ ] 我的数据量是多少（小/中/大）
- [ ] 我的更新频率要求（日/小时/分钟）
- [ ] 我已选择合适的数据源
- [ ] 我已创建同步任务
- [ ] 我已验证数据被正确同步

---

## 🎯 核心结论

### 对大多数用户
```
推荐配置：Yahoo Finance + EastMoney
成本：¥0
理由：
  • 历史数据完整（Yahoo）
  • 实时行情及时（EastMoney）
  • 都是完全免费
  • 配置简单
  • 维护成本低
```

### 对专业用户
```
推荐配置：Tushare + Yahoo Finance
成本：¥1188+/月
理由：
  • 技术指标完整
  • 支持量化分析
  • 回测功能强大
  • Yahoo 作为基础数据源
```

### 对企业用户
```
推荐配置：IEX Cloud 或 Polygon.io
成本：¥7000-14000+/月
理由：
  • 企业级 SLA
  • 实时毫秒延迟
  • 全球市场覆盖
  • 专业支持团队
```

---

**最后提醒**：如有疑问，优先查看`DATA_SOURCE_QUICK_REFERENCE.txt`，它用最少的篇幅解答最常见的问题。

---

**文档版本**：v1.0  
**最后更新**：2025-11-07  
**维护者**：FinApp 团队
