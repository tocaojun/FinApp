# æ•°æ®æºæ•´ç†åŒ…å®Œæ•´æ¸…å•

## ğŸ“¦ åŒ…å†…å®¹æ€»ç»“

å·²ä¸ºä½ æ•´ç†äº†å››ä¸ªä¸»è¦è´¢ç»æ•°æ®æºçš„å®Œæ•´ JSON é…ç½®æ–‡ä»¶å’Œæ–‡æ¡£ã€‚

### æ ¸å¿ƒé…ç½®æ–‡ä»¶

ä½ç½®ï¼š`/docs/data-source-configs/`

| æ–‡ä»¶ | æè¿° | å¤§å° |
|------|------|------|
| `yahoo-finance.json` | Yahoo Finance å®Œæ•´é…ç½® | 866 B |
| `eastmoney.json` | ä¸œæ–¹è´¢å¯Œå®Œæ•´é…ç½® | 966 B |
| `sina.json` | æ–°æµªè´¢ç»å®Œæ•´é…ç½® | 990 B |
| `fred.json` | FRED å®Œæ•´é…ç½® | 1.3 KB |
| `init-data-sources.sql` | æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ | 7.2 KB |
| `README.md` | ç›®å½•è¯´æ˜æ–‡æ¡£ | 3.5 KB |

### ç›¸å…³æ–‡æ¡£

ä½ç½®ï¼š`/docs/`

| æ–‡ä»¶ | æè¿° | å¤§å° |
|------|------|------|
| `DATA_SOURCE_CONFIGS.md` | å®Œæ•´é…ç½®æŒ‡å—ï¼ˆå«è¯¦ç»†è¯´æ˜ï¼‰ | 7.7 KB |
| `DATA_SOURCE_QUICK_REFERENCE.md` | å¿«é€Ÿå‚è€ƒæŒ‡å— | 4.9 KB |
| `DATA_SOURCE_PACKAGE_MANIFEST.md` | æœ¬æ–‡ä»¶ | - |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©æ•°æ®æº

æ ¹æ®ä½ çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ•°æ®æºï¼š

| åœºæ™¯ | æ¨èæ•°æ®æº | è¯´æ˜ |
|------|----------|------|
| ç¾è‚¡äº¤æ˜“ | Yahoo Finance | å®æ—¶æ•°æ®ï¼Œæ— éœ€ API Key |
| Aè‚¡äº¤æ˜“ | ä¸œæ–¹è´¢å¯Œ | æœ€å®æ—¶çš„ A è‚¡æ•°æ® |
| å›½å†…æœŸè´§ | æ–°æµªè´¢ç» | æ”¯æŒæœŸè´§å’Œå¤–æ±‡ |
| ç»æµåˆ†æ | FRED | ç¾å›½ç»æµæ•°æ®åº“ |
| ç»„åˆåº”ç”¨ | å…¨éƒ¨ | å¤šæºæ•°æ®èåˆ |

### ç¬¬äºŒæ­¥ï¼šé…ç½®æ•°æ®æº

**æ–¹å¼ Aï¼šUI æ‰‹åŠ¨é…ç½®ï¼ˆæ¨èï¼‰**
```
1. è®¿é—® http://localhost:3001/admin/data-sync
2. ç‚¹å‡»"æ•°æ®æº"é¡µç­¾
3. ç‚¹å‡»"æ–°å¢æ•°æ®æº"
4. æ‰“å¼€å¯¹åº” JSON æ–‡ä»¶ï¼Œå¤åˆ¶å†…å®¹ç²˜è´´
5. ç‚¹å‡»"ç¡®å®š"ä¿å­˜
```

**æ–¹å¼ Bï¼šæ•°æ®åº“è„šæœ¬ï¼ˆæ¨èæ‰¹é‡ï¼‰**
```bash
# å¤‡ä»½æ•°æ®åº“ï¼ˆé‡è¦ï¼ï¼‰
pg_dump -h localhost -U finapp_user -d finapp_test > backup_$(date +%s).sql

# æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬
psql -h localhost -U finapp_user -d finapp_test -f docs/data-source-configs/init-data-sources.sql
```

### ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºåŒæ­¥ä»»åŠ¡

1. è¿›å…¥ **æ•°æ®åŒæ­¥** â†’ **åŒæ­¥ä»»åŠ¡** é¡µç­¾
2. ç‚¹å‡» **æ–°å»ºä»»åŠ¡** æŒ‰é’®
3. å¡«å†™ä»»åŠ¡ä¿¡æ¯ï¼š
   - ä»»åŠ¡åç§°
   - é€‰æ‹©æ•°æ®æº
   - é€‰æ‹©äº§å“ç±»å‹å’Œå›½å®¶
   - è®¾ç½®è°ƒåº¦æ–¹å¼
4. ç‚¹å‡» **ç¡®å®š** åˆ›å»ºä»»åŠ¡
5. ç‚¹å‡» **ç«‹å³è¿è¡Œ** æµ‹è¯•

### ç¬¬å››æ­¥ï¼šç›‘æ§ç»“æœ

- æŸ¥çœ‹ **åŒæ­¥æ—¥å¿—** é¡µç­¾
- ç¡®è®¤åŒæ­¥æˆåŠŸ
- æ£€æŸ¥å¯¼å…¥çš„æ•°æ®

---

## ğŸ“‹ é…ç½®æ–‡ä»¶è¯´æ˜

### Yahoo Finance

```json
{
  "name": "Yahoo Finance",
  "provider": "yahoo_finance",
  "api_endpoint": "https://query1.finance.yahoo.com/v8/finance/chart/",
  "config": {
    "supports_products": ["STOCK", "ETF", "FUND"],
    "supports_countries": ["US", "HK", "CN"],
    "requires_api_key": false
  }
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… æ— éœ€ API Key
- âœ… ç¾è‚¡ã€æ¸¯è‚¡ã€Aè‚¡å®æ—¶æ•°æ®
- âœ… æä¾› K çº¿å’Œè´¢åŠ¡æ•°æ®
- âŒ å•ä¸ªè¯·æ±‚å¤„ç†

### ä¸œæ–¹è´¢å¯Œ

```json
{
  "name": "ä¸œæ–¹è´¢å¯Œ",
  "provider": "eastmoney",
  "api_endpoint": "http://push2.eastmoney.com/api/qt/stock/kline/get",
  "config": {
    "supports_products": ["STOCK", "FUND"],
    "supports_countries": ["CN"],
    "symbol_prefix": {
      "stock_sh": "sh",
      "stock_sz": "sz"
    }
  }
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… æ— éœ€ API Key
- âœ… A è‚¡æ•°æ®æœ€å®æ—¶
- âœ… æ”¯æŒåŸºé‡‘æ•°æ®
- âš ï¸ è‚¡ç¥¨ä»£ç éœ€è¦å‰ç¼€ï¼ˆsh/szï¼‰

### æ–°æµªè´¢ç»

```json
{
  "name": "æ–°æµªè´¢ç»",
  "provider": "sina",
  "api_endpoint": "http://hq.sinajs.cn/",
  "config": {
    "supports_products": ["STOCK", "FUND", "FUTURES", "FOREX"],
    "supports_countries": ["CN"],
    "supports_batch": true
  }
}
```

**ç‰¹ç‚¹ï¼š**
- âœ… æ— éœ€ API Key
- âœ… æ”¯æŒæ‰¹é‡æŸ¥è¯¢
- âœ… æ”¯æŒæœŸè´§ã€å¤–æ±‡
- âŒ ä»…æä¾›å½“å¤©æ•°æ®ï¼ˆæ— å†å²ï¼‰

### FRED

```json
{
  "name": "FRED",
  "provider": "fred",
  "api_endpoint": "https://api.stlouisfed.org/fred/",
  "config": {
    "supports_products": ["ECONOMIC_INDICATOR"],
    "supports_countries": ["US"],
    "requires_api_key": true,
    "api_key_env_var": "FRED_API_KEY"
  }
}
```

**ç‰¹ç‚¹ï¼š**
- âš ï¸ éœ€è¦ API Keyï¼ˆå…è´¹æ³¨å†Œï¼‰
- âœ… ç¾å›½ç»æµæ•°æ®
- âœ… å†å²æ•°æ®ä¸°å¯Œ
- âœ… æ”¯æŒæ‰¹é‡æŸ¥è¯¢

---

## ğŸ” API Key é…ç½®

### FREDï¼ˆéœ€è¦ï¼‰

1. **è·å– API Key**
   - è®¿é—® https://fredaccount.stlouisfed.org/login/secure/
   - æ³¨å†Œæˆ–ç™»å½•è´¦æˆ·
   - åœ¨ Settings ä¸­åˆ›å»ºæ–°çš„ API Key

2. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # ç¼–è¾‘ backend/.env
   FRED_API_KEY=your_api_key_here
   
   # é‡å¯åç«¯
   cd backend && npm run dev
   ```

3. **éªŒè¯**
   ```bash
   # æµ‹è¯• API è¿æ¥
   curl "https://api.stlouisfed.org/fred/series/UNRATE?api_key=$FRED_API_KEY&file_type=json"
   ```

---

## ğŸ› ï¸ å¸¸è§æ“ä½œ

### ä¿®æ”¹å·²æœ‰æ•°æ®æºé…ç½®

1. åœ¨ UI ä¸­ç¼–è¾‘ JSON é…ç½®
2. æˆ–é€šè¿‡ SQL æ›´æ–°ï¼š
   ```sql
   UPDATE finapp.price_data_sources
   SET config = '{"æ–°çš„é…ç½®"}'::jsonb
   WHERE name = 'Yahoo Finance';
   ```

### åˆ é™¤æ•°æ®æº

```sql
DELETE FROM finapp.price_data_sources
WHERE name = 'Yahoo Finance';
```

### æŸ¥çœ‹æ‰€æœ‰æ•°æ®æº

```sql
SELECT id, name, provider, is_active
FROM finapp.price_data_sources
ORDER BY created_at DESC;
```

### å¯ç”¨/ç¦ç”¨æ•°æ®æº

```sql
UPDATE finapp.price_data_sources
SET is_active = true
WHERE provider = 'yahoo_finance';
```

---

## âœ… è´¨é‡æ£€æŸ¥

æ‰€æœ‰æ–‡ä»¶å·²é€šè¿‡éªŒè¯ï¼š

- âœ“ JSON æ ¼å¼æ ¡éªŒï¼šæ‰€æœ‰ JSON æ–‡ä»¶å·²éªŒè¯
- âœ“ å­—æ®µå®Œæ•´æ€§ï¼šæ‰€æœ‰å¿…éœ€å­—æ®µå·²åŒ…å«
- âœ“ æ–‡æ¡£å®Œæ•´æ€§ï¼šé…ç½®æŒ‡å—ã€å¿«é€Ÿå‚è€ƒå·²å®Œæˆ
- âœ“ å›½å®¶ç»´åº¦ï¼šæ‰€æœ‰é…ç½®å·²æ›´æ–°ä¸ºå›½å®¶ç»´åº¦

---

## ï¿½ï¿½ ç›¸å…³æ–‡æ¡£å¯¼èˆª

```
/docs/
â”œâ”€â”€ DATA_SOURCE_CONFIGS.md              â† å®Œæ•´é…ç½®è¯´æ˜
â”œâ”€â”€ DATA_SOURCE_QUICK_REFERENCE.md      â† å¿«é€Ÿå‚è€ƒ
â”œâ”€â”€ DATA_SOURCE_PACKAGE_MANIFEST.md     â† æœ¬æ–‡ä»¶
â””â”€â”€ data-source-configs/
    â”œâ”€â”€ README.md                       â† ç›®å½•è¯´æ˜
    â”œâ”€â”€ yahoo-finance.json              â† Yahoo Finance
    â”œâ”€â”€ eastmoney.json                  â† ä¸œæ–¹è´¢å¯Œ
    â”œâ”€â”€ sina.json                       â† æ–°æµªè´¢ç»
    â”œâ”€â”€ fred.json                       â† FRED
    â””â”€â”€ init-data-sources.sql           â† æ•°æ®åº“è„šæœ¬
```

---

## ğŸ¯ åç»­æ­¥éª¤å»ºè®®

### ç«‹å³æ‰§è¡Œ
1. âœ… æ ¹æ®éœ€æ±‚é€‰æ‹© 1-2 ä¸ªæ•°æ®æº
2. âœ… é…ç½®æ•°æ®æº
3. âœ… åˆ›å»ºæµ‹è¯•åŒæ­¥ä»»åŠ¡

### æœ¬å‘¨å®Œæˆ
1. âœ… éªŒè¯æ‰€æœ‰æ•°æ®æºè¿è¡Œæ­£å¸¸
2. âœ… é…ç½®å®šæ—¶åŒæ­¥ä»»åŠ¡
3. âœ… åˆ¶å®šæ•°æ®æ›´æ–°ç­–ç•¥

### æŒç»­ä¼˜åŒ–
1. âœ… ç›‘æ§åŒæ­¥ä»»åŠ¡è¿è¡ŒçŠ¶æ€
2. âœ… æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´é…ç½®
3. âœ… å®šæœŸå¤‡ä»½å’Œç»´æŠ¤

---

## ğŸ“ é—®é¢˜æ’æŸ¥

### JSON æ ¼å¼é”™è¯¯
- ä½¿ç”¨å·¥å…·éªŒè¯ï¼š`cat file.json | jq .`
- åœ¨çº¿éªŒè¯ï¼šhttps://jsonlint.com/
- æ£€æŸ¥æ‰€æœ‰å¼•å·å¿…é¡»æ˜¯è‹±æ–‡åŒå¼•å·

### è¿æ¥è¶…æ—¶
- æ£€æŸ¥ API ç«¯ç‚¹ URL æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- å¢åŠ  timeout_seconds å€¼

### è¯·æ±‚é™åˆ¶
- æ£€æŸ¥é€Ÿç‡é™åˆ¶è®¾ç½®
- å‡å°‘å¹¶å‘è¯·æ±‚æ•°
- ç­‰å¾…å‡ åˆ†é’Ÿåé‡è¯•

### æ•°æ®ä¸æ›´æ–°
- æ£€æŸ¥åŒæ­¥ä»»åŠ¡æ˜¯å¦å¯ç”¨
- æŸ¥çœ‹åŒæ­¥æ—¥å¿—é”™è¯¯ä¿¡æ¯
- éªŒè¯ API Keyï¼ˆFREDï¼‰

---

## ï¿½ï¿½ ç»Ÿè®¡ä¿¡æ¯

| é¡¹ç›® | æ•°å€¼ |
|------|------|
| é…ç½®æ–‡ä»¶æ•°é‡ | 4 ä¸ª |
| åŒ…å«äº§å“ç±»å‹ | 8 ç§ |
| æ”¯æŒå›½å®¶æ•°é‡ | 4 ä¸ª |
| æ–‡æ¡£æ–‡ä»¶æ•° | 3 ä¸ª |
| æ€»åŒ…å¤§å° | ~30 KB |
| å·²éªŒè¯æ ¼å¼ | 100% âœ“ |

---

## ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬**ï¼š1.0
- **å‘å¸ƒæ—¥æœŸ**ï¼š2025-11-08
- **æ¶æ„**ï¼šå›½å®¶ç»´åº¦ï¼ˆæ”¯æŒå¤šäº§å“ç±»å‹ï¼‰
- **å…¼å®¹æ€§**ï¼šä¸ç°æœ‰ç³»ç»Ÿå®Œå…¨å…¼å®¹

---

**äº«å—æ•°æ®æºç®¡ç†çš„ä¾¿åˆ©ï¼** ğŸ‰

