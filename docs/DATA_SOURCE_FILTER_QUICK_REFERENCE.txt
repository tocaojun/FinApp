================================================================================
                   æ•°æ®æºåŠ¨æ€è¿‡æ»¤åŠŸèƒ½ - å¿«é€Ÿå‚è€ƒ
================================================================================

ğŸ“Œ åŠŸèƒ½æ¦‚è¿°
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç”¨æˆ·åœ¨åˆ›å»ºåŒæ­¥ä»»åŠ¡æ—¶é€‰å®šæ•°æ®æºåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿‡æ»¤æ˜¾ç¤ºè¯¥æ•°æ®æºæ”¯æŒçš„ï¼š
  â€¢ èµ„äº§ç±»å‹ï¼ˆSTOCK, BOND, FUND, ETF ç­‰ï¼‰
  â€¢ å¸‚åœºï¼ˆNYSE, NASDAQ, SSE, SZSE ç­‰ï¼‰

âœ… ä»£ç å˜æ›´æ¸…å•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

åç«¯ä¿®æ”¹ (3 ä¸ªæ–‡ä»¶):
  1. /backend/src/services/PriceSyncService.ts
     â†’ æ–°å¢æ–¹æ³•: getDataSourceCoverage()
  
  2. /backend/src/controllers/PriceSyncController.ts
     â†’ æ–°å¢æ–¹æ³•: getDataSourceCoverage()
  
  3. /backend/src/routes/priceSync.ts
     â†’ æ–°å¢è·¯ç”±: GET /data-sources/:id/coverage

å‰ç«¯ä¿®æ”¹ (1 ä¸ªæ–‡ä»¶):
  1. /frontend/src/pages/admin/DataSync/index.tsx
     â†’ æ–°å¢çŠ¶æ€: filteredAssetTypes, filteredMarkets
     â†’ æ–°å¢æ–¹æ³•: loadDataSourceCoverage()
     â†’ ä¿®æ”¹: æ•°æ®æºé€‰æ‹©ã€èµ„äº§ç±»å‹ã€å¸‚åœºä¸‹æ‹‰æ¡†

ğŸ”Œ æ–°å¢ API ç«¯ç‚¹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

è¯·æ±‚:
  GET /api/price-sync/data-sources/:id/coverage
  Header: Authorization: Bearer {token}

å“åº”:
  {
    "success": true,
    "data": {
      "id": "uuid",
      "name": "æ•°æ®æºåç§°",
      "provider": "provider_code",
      "productTypes": ["STOCK", "BOND", "ETF"],
      "markets": [
        { "code": "NYSE", "name": "çº½çº¦è¯åˆ¸äº¤æ˜“æ‰€" },
        { "code": "NASDAQ", "name": "çº³æ–¯è¾¾å…‹" }
      ]
    }
  }

ğŸ¯ ä½¿ç”¨æµç¨‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ç”¨æˆ·æ“ä½œ:
  1. æ‰“å¼€"æ•°æ®åŒæ­¥" â†’ "æ–°å»ºä»»åŠ¡"
  2. é€‰æ‹©æ•°æ®æºä¸‹æ‹‰æ¡†
  3. [ç³»ç»Ÿè‡ªåŠ¨] åŠ è½½è¯¥æ•°æ®æºçš„è¦†ç›–èŒƒå›´
  4. [ç³»ç»Ÿè‡ªåŠ¨] æ›´æ–°èµ„äº§ç±»å‹å’Œå¸‚åœºä¸‹æ‹‰æ¡†
  5. ç”¨æˆ·é€‰æ‹©èµ„äº§ç±»å‹å’Œå¸‚åœº
  6. æäº¤è¡¨å•

åç«¯å¤„ç†:
  1. ç”¨æˆ·é€‰æ‹©æ•°æ®æº â†’ å‰ç«¯è°ƒç”¨ loadDataSourceCoverage(id)
  2. å‰ç«¯å‘é€ GET /api/price-sync/data-sources/{id}/coverage
  3. åç«¯ getDataSourceCoverage() æ–¹æ³•å¤„ç†:
     a. æŸ¥è¯¢æ•°æ®æºé…ç½®
     b. æå– supports_products å’Œ supports_markets
     c. æŸ¥è¯¢ markets è¡¨è·å–å¸‚åœºè¯¦ç»†ä¿¡æ¯
     d. è¿”å›ç»“æ„åŒ–æ•°æ®
  4. å‰ç«¯æ¥æ”¶å“åº”ï¼Œè¿‡æ»¤æœ¬åœ°æ•°æ®
  5. æ›´æ–°çŠ¶æ€ï¼Œé‡æ–°æ¸²æŸ“ä¸‹æ‹‰æ¡†

ğŸ§ª å¿«é€Ÿæµ‹è¯•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

API æµ‹è¯•:
  curl -X GET \
    'http://localhost:5000/api/price-sync/data-sources/{id}/coverage' \
    -H 'Authorization: Bearer {token}'

å‰ç«¯æµ‹è¯•:
  1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
  2. è¿›å…¥"æ•°æ®åŒæ­¥"é¡µé¢
  3. ç‚¹å‡»"æ–°å»ºä»»åŠ¡"
  4. åœ¨"æ•°æ®æº"ä¸‹æ‹‰æ¡†é€‰æ‹©ä¸€ä¸ªæ•°æ®æº
  5. è§‚å¯Ÿ:
     âœ“ Network æ ‡ç­¾ä¸­åº”å‡ºç° /coverage è¯·æ±‚
     âœ“ èµ„äº§ç±»å‹å’Œå¸‚åœºä¸‹æ‹‰æ¡†åŠ¨æ€æ›´æ–°
     âœ“ Console ä¸­æ— çº¢è‰²é”™è¯¯

ğŸ“Š è¦†ç›–èŒƒå›´é…ç½®ç¤ºä¾‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Alpha Vantage (ç¾å›½è‚¡ç¥¨API):
  {
    "supports_products": ["STOCK", "ETF"],
    "supports_markets": ["NYSE", "NASDAQ"],
    ...
  }

æ–°æµªè´¢ç» (ä¸­å›½è‚¡ç¥¨æ•°æ®):
  {
    "supports_products": ["STOCK", "BOND", "FUND"],
    "supports_markets": ["SSE", "SZSE", "HKEX", "NYSE", "NASDAQ"],
    ...
  }

Tushare (ä¸­å›½è‚¡ç¥¨å’ŒåŸºé‡‘):
  {
    "supports_products": ["STOCK", "FUND", "ETF"],
    "supports_markets": ["SSE", "SZSE"],
    ...
  }

âš¡ æ€§èƒ½æŒ‡æ ‡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

API å“åº”æ—¶é—´:      < 200ms (æ•°æ®åº“ç›´æ¥æŸ¥è¯¢)
å‰ç«¯ä¸‹æ‹‰æ¡†æ›´æ–°:    < 100ms (ç®€å•æ•°ç»„è¿‡æ»¤)
å†…å­˜å ç”¨:          < 1MB
æ”¯æŒçš„å¹¶å‘è¯·æ±‚:    100+

ğŸ” æ•…éšœæ’æŸ¥
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

é—®é¢˜: ä¸‹æ‹‰æ¡†æ˜¾ç¤ºæ‰€æœ‰é€‰é¡¹ï¼ˆæœªè¿‡æ»¤ï¼‰
â†’ æ£€æŸ¥æµè§ˆå™¨ Network æ ‡ç­¾ï¼Œ/coverage è¯·æ±‚æ˜¯å¦æˆåŠŸ
â†’ æŸ¥çœ‹æµè§ˆå™¨ Consoleï¼Œæ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—
â†’ éªŒè¯æ•°æ®æºé…ç½®: SELECT config FROM price_data_sources

é—®é¢˜: ä¸‹æ‹‰æ¡†è¢«ç¦ç”¨ï¼ˆæ— å¯é€‰é¡¹ï¼‰
â†’ è¯¥æ•°æ®æºå¯èƒ½ä¸æ”¯æŒä»»ä½•äº§å“/å¸‚åœº
â†’ æ£€æŸ¥æ•°æ®æºé…ç½®ä¸­çš„ supports_products/supports_markets æ˜¯å¦ä¸ºç©º
â†’ éªŒè¯å¸‚åœºä»£ç æ˜¯å¦å­˜åœ¨: SELECT code FROM markets

é—®é¢˜: ç¼–è¾‘ä»»åŠ¡æ—¶é€‰é¡¹ä¸å¯ç”¨
â†’ ä¿å­˜çš„é€‰é¡¹å¯èƒ½ä¸åœ¨å½“å‰æ•°æ®æºçš„è¦†ç›–èŒƒå›´å†…
â†’ æ•°æ®æºé…ç½®å¯èƒ½è¢«ä¿®æ”¹è¿‡
â†’ æ›´æ–°æ•°æ®æºé…ç½®ï¼Œé‡æ–°ç¼–è¾‘ä»»åŠ¡

ğŸ“š ç›¸å…³æ–‡æ¡£
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

è¯¦ç»†æŒ‡å—: /docs/DATA_SOURCE_DYNAMIC_FILTER_GUIDE.md
  â†’ å®Œæ•´çš„å·¥ä½œåŸç†
  â†’ æ•°æ®åº“é…ç½®è¦æ±‚
  â†’ è¯¦å°½æµ‹è¯•æ­¥éª¤
  â†’ æ•…éšœæ’æŸ¥æ–¹æ¡ˆ

éªŒè¯æ¸…å•: /docs/DATA_SOURCE_FILTER_VERIFICATION_CHECKLIST.md
  â†’ ç¼–è¯‘å¯åŠ¨æ£€æŸ¥
  â†’ API éªŒè¯æ­¥éª¤
  â†’ UI åŠŸèƒ½æµ‹è¯•
  â†’ æ€§èƒ½éªŒè¯
  â†’ æäº¤å‰æ£€æŸ¥æ¸…å•

å®ç°æ€»ç»“: /docs/DATA_SOURCE_FILTER_IMPLEMENTATION_SUMMARY.md
  â†’ éœ€æ±‚è¯´æ˜
  â†’ å®ç°å®Œæ•´ç»†èŠ‚
  â†’ æŠ€æœ¯æ¶æ„
  â†’ éƒ¨ç½²æ­¥éª¤

æµ‹è¯•è„šæœ¬: /scripts/test-data-source-coverage.sh
  â†’ è‡ªåŠ¨åŒ– API æµ‹è¯•
  â†’ è¦†ç›–èŒƒå›´éªŒè¯

ğŸš€ éƒ¨ç½²æ­¥éª¤
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. ä»£ç æäº¤:
   git add -A
   git commit -m "feat: æ·»åŠ æ•°æ®æºåŠ¨æ€è¿‡æ»¤åŠŸèƒ½"

2. åç«¯é‡å¯:
   cd backend
   npm run build
   npm restart

3. å‰ç«¯é‡å¯:
   cd frontend
   npm run build
   npm restart

4. éªŒè¯:
   æ‰“å¼€æ•°æ®åŒæ­¥é¡µé¢ï¼Œæµ‹è¯•åŠŸèƒ½

ğŸ’¡ æœ€ä½³å®è·µ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ å§‹ç»ˆä¿æŒæ•°æ®æºé…ç½®å®Œæ•´ï¼ˆsupports_products, supports_marketsï¼‰
âœ“ å®šæœŸæ£€æŸ¥å¸‚åœºä»£ç æ˜¯å¦æœ‰æ•ˆï¼ˆSELECT * FROM marketsï¼‰
âœ“ ä½¿ç”¨æµè§ˆå™¨å¼€å‘å·¥å…·è°ƒè¯•å‰ç«¯çŠ¶æ€
âœ“ ç›‘æ§ API å“åº”æ—¶é—´ï¼Œä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
âœ“ ä¸ºç”¨æˆ·æä¾›æ¸…æ™°çš„æç¤ºä¿¡æ¯
âœ“ å®ç°ä¼˜é›…é™çº§ï¼ŒAPI å¤±è´¥æ—¶æ˜¾ç¤ºå…¨éƒ¨é€‰é¡¹

================================================================================
ç‰ˆæœ¬: v1.0
æ›´æ–°æ—¥æœŸ: 2025-11-07
================================================================================
